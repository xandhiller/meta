%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math Macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Standard Notation for Vectors in Computer Vision
\newcommand{\vc}[2]{\mathbf{#1}_{#2}}
% Laplace Transform
\newcommand{\Lapl}[1]{\mathcal{L}  \bigg\{ #1  \bigg\}  } 
% Inverse Laplace Transform
\newcommand{\iLapl}[1]{\mathcal{L}^{-1}  \bigg\{ #1  \bigg\}  } 

% Footnote preferences
\renewcommand{\thefootnote}{\fnsymbol{footnote}}
  % Listings Prerequisites
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour},   
  commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\footnotesize\ttfamily,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}
\lstset{style=mystyle} 

% Allows you to refer to the author and title in text
\makeatletter
\let\inserttitle\@title
\makeatother
\makeatletter
\let\insertauthor\@author
\makeatother

\newcommand{\qed}{$\square$}
\newcommand{\QED}{\hspace*{\fill}$\square$}
%----------------------%
% Counter for Custom Environments
%----------------------% 
%\rtask{label}
%\section{Task \ref{label}. Blah}
%----------------------%
% Custom Environments
%----------------------% 
\newcounter{question} 
\newcommand{\qanda}[2]{\AtEndDocument{\stepcounter{question}Q\arabic{question}. \textit{#1} \vspace{2mm}\newline \AtEndDocument{A\arabic{question}. #2 \newline \newline}}}
%----------------------%
\newenvironment{term}
{}%\capitalisewords?
{}
%----------------------%
\global\mdfdefinestyle{exampledefault}{%
linecolor=black!50,middlelinewidth=0.8pt,
roundcorner=2pt,%
leftmargin=1cm,rightmargin=1cm,
}
%----------------------%
% FIXME: Dashed lines don't work.
\global\mdfdefinestyle{dashdefault}{%
linecolor=black!10,middlelinewidth=0.8pt,
roundcorner=2pt,pstrickssetting={linestyle=dashed,}%
leftmargin=1cm,rightmargin=1cm,
}
%----------------------%
\newcounter{assert}
\newenvironment{assert}
{\begin{mdframed}[style=exampledefault]
    \stepcounter{subsection}
    %\phantomsubsection
    \addcontentsline{toc}{subsection}{\textit{Assertion \thesubsection}}
    \textbf{Assertion \thesubsection}: }
{\end{mdframed}}
%----------------------%
\newcounter{define}
\newenvironment{define}
{\begin{mdframed}[style=exampledefault]
    \stepcounter{subsection}
    %\phantomsubsection
\addcontentsline{toc}{subsection}{\textit{Definition \thesubsection}}
    \textbf{Definition \thesubsection}: }
{\end{mdframed}}
%----------------------%
\newcounter{proof}
\newenvironment{proof}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!6]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Proof \thesubsection}}
    \textbf{Proof \thesubsection}:}
{\QED\end{mdframed}}
%----------------------%
\newcounter{theorem}
\newenvironment{theorem}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!9]
    \stepcounter{subsection}
\addcontentsline{toc}{subsection}{\textit{Theorem \thesubsection}}
    \textbf{Theorem \thesubsection}:}
{\end{mdframed}} 
%----------------------%
\newcounter{example}
\newenvironment{example}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!13]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Example \thesubsection}}
    \textbf{Example \thesubsection}:}
{\end{mdframed}}
%----------------------%
\newcounter{remark}
\newenvironment{remark}
{\begin{mdframed}[style=dashdefault]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Remark \thesubsection}}
    \textbf{Remark \thesubsection}:}
{\end{mdframed}}
%--------------------------------------------------------------%
%---------------------- Without counters ----------------------%
\newenvironment{assert*}
{\begin{mdframed}[style=exampledefault]\textbf{Assertion}: }
{\end{mdframed}}
%----------------------%
\newenvironment{define*}
{\begin{mdframed}[style=exampledefault]\textbf{Definition}: }
{\end{mdframed}}
%----------------------%
\newenvironment{proof*}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!6]\textbf{Proof}: }
{\QED\end{mdframed}}
%----------------------%
\newenvironment{theorem*}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!9]\textbf{Theorem}: }
{\end{mdframed}} 
%----------------------%
\newenvironment{example*}
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!13]\textbf{Example}: }
{\end{mdframed}}
%----------------------%
\newenvironment{remark*}
{\begin{mdframed}[style=dashdefault]\textbf{Remark}: }
{\end{mdframed}}
%-----------------------------------------------------------------------%
%---------------------- With names in parantheses ----------------------%
\newenvironment{Theorem}[1]
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!9]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Theorem \thesubsection}}
    \textbf{Theorem \thesubsection}: (\textit{#1})}
{\end{mdframed}} 
%-----------------------------------------------------------------------%
\newenvironment{Assert}[1]
{\begin{mdframed}[style=exampledefault]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Assert \thesubsection}}
    \textbf{Assertion \thesubsection}: (\textit{#1})}
{\end{mdframed}}
%----------------------%
\newenvironment{Define}[1]
{\begin{mdframed}[style=exampledefault]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Definition \thesubsection}}
    \textbf{Definition \thesubsection}: (\textit{#1})}
{\end{mdframed}}
%----------------------%
\newenvironment{Proof}[1]
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!6]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Proof \thesubsection}}
    \textbf{Proof \thesubsection}: (\textit{#1})}
{\QED\end{mdframed}}
%----------------------%
\newenvironment{Example}[1]
{\begin{mdframed}[linecolor=black!50, roundcorner=3pt, backgroundcolor=black!13]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Example \thesubsection}}
    \textbf{Example \thesubsection}: (\textit{#1})}
{\end{mdframed}}
%----------------------%
\newenvironment{Remark}[1]
{\begin{mdframed}[style=dashdefault]
    \stepcounter{subsection}
    \addcontentsline{toc}{subsection}{\textit{Remark \thesubsection}}
    \textbf{Remark \thesubsection}: (\texit{#1})}
{\end{mdframed}}
